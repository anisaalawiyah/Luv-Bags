// import { pool } from "../db.js";


// export const getAllOrders = async (req, res) => {
//     try {
//       const result = await pool.query('SELECT * FROM Orders');
//       return res.status(200).json({
//         status: 'success',
//         message: 'Berhasil menampilkan semua data transaksi',
//         data: result.rows
//       });
//     } catch (error) {
//       console.error("Error in getAllTransactions:", error);
//       return res.status(500).json({
//         status: 'error',
//         message: 'Gagal menampilkan data transaksi',
//       });
//     }
//   }
  
  
// //   // Endpoint untuk mengakses keranjang pengguna
// //   app.post('/api/add-to-cart',async (req, res) => {
// //       const { user_id, product_id, quantity } = req.body;
      
// //       try {
// //           await pool.query(
// //               `INSERT INTO carts (user_id, product_id, quantity) VALUES ($1, $2, $3)`,
// //               [user_id, product_id, quantity]
// //           );
// //           res.status(200).json({ message: "Item added to cart" });
// //       } catch (err) {
// //           console.error(err);
// //           res.status(500).json({ message: "Error adding item to cart" });
// //       }
// //   });
  
// export const addOrders = async (req, res) => {
  
//     // Validasi data input
//     if (!req.body || !req.body.data || req.body.data.length < 1) {
//       return res.status(400).json({
//         status: "failed",
//         message: "Data transaksi tidak boleh kosong!",
//       });
//     }
//     const orderDate = new Date();
//     try {
//       const orderResult = await pool.query(
//         `INSERT INTO Orders (user_id, username, address, quantity, total_price, order_date,payment_method, status) 
//          VALUES ($1, $2, $3, $4, $5, $6, $7,$8) 
//          RETURNING order_id`,
//         [
//           req.body.user_id,        // user_id: ID pengguna
//           req.body.customer,       // username: Nama pengguna
//           req.body.address,        // address: Alamat pengguna
//           req.body.quantity,       // quantity: Jumlah produk yang dipesan
//           req.body.total_price,    // total_price: Harga total untuk item ini (price * quantity)
//           orderDate,  
//           req.body.payment_method,             // order_date: Tanggal pesanan (sekarang)
//           "pending"                // status: Status pesanan, default "pending"
//         ]
//       );
  
//       const orderId = orderResult.rows[0].id;
//       console.log(orderId);
  
  
//       // Update stok produk di tabel products
//       console.log(req.body.data);
//       // Add data detail_order
//       for (let i = 0; i < req.body.data.length; i++) {
//         const data = req.body.data[i];
     
      
//         // Update product stock
//         await pool.query(`UPDATE cakes SET stock = stock - $1 WHERE id = $2`, [
//           data.quantity,
//           data.id,
//         ]);
//       }
  
//       return res.status(201).json({
//         status: 'success',
//         message: 'Berhasil menambahkan data transaksi',
//         data: {
//           id: transactionId
//         }
//       });
//     } catch (error) {
//       console.error("Error in postTransaction:", error);
//       return res.status(500).json({
//         status: 'error',
//         message: 'Gagal menambahkan data transaksi',
//       });
//     }
//   };
  
  